<template>
  <div ref="container" class="controller-container"
       :style="{ width: controllerWidth+'px', height: controllerHeight+'px' }">
    <div
      class="score-controller"
      :style="{ width: controllerWidth+'px', height: controllerHeight+'px' }">
      <div class="con-slider" ref="slider" :title="tips">
        <div class="process" :style="{width:seekWidth}"></div>
        <div class="thunk" ref="trunk" :style="{left}">
          <div class="btn-circle"></div>
        </div>
      </div>
      <i
        title="播放/暂停"
        style="float: left;margin-left: 20px"
        @click="handlePlay">
        <svg v-show="!playStateValue" t="1562724767371" viewBox="0 0 1024 1024" version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="15263" width="20" height="20">
          <path
            d="M192.01752 181.119321L761.615384 511.99808 192.01752 843.516837V181.119321M119.697791 0A56.319789 56.319789 0 0 0 64.018 58.239782v909.436589a55.039794 55.039794 0 0 0 55.679791 56.319789 58.879779 58.879779 0 0 0 28.799892-7.679971c49.919813-28.159894 740.477223-430.078387 782.717065-455.038294a56.959786 56.959786 0 0 0 0-98.55963L150.417676 8.959966A63.99976 63.99976 0 0 0 119.697791 0z"
            p-id="15264" fill="#ffffff"></path>
        </svg>
        <svg t="1562724858312" v-show="playStateValue" viewBox="0 0 1024 1024" version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="16061" width="20" height="20">
          <path
            d="M686.48 119.56c0-32.377 26.326-58.645 58.645-58.645 32.387 0 58.646 26.421 58.646 58.645v781.93c0 32.377-26.326 58.645-58.646 58.645-32.386 0-58.645-26.42-58.645-58.644V119.56z m-469.159 0c0-32.377 26.326-58.645 58.646-58.645 32.385 0 58.644 26.421 58.644 58.645v781.93c0 32.377-26.325 58.645-58.644 58.645-32.386 0-58.646-26.42-58.646-58.644V119.56z"
            p-id="16062" fill="#ffffff"></path>
        </svg>
      </i>
      <i class="stop-btn" title="停止" style="float: left;margin-left: 20px" @click="handleStop">
        <svg t="1562724967431" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
             p-id="16847" width="20" height="20">
          <path
            d="M876.892426 153.17758a511.90451 511.90451 0 1 0-6.0641 723.911732 511.90451 511.90451 0 0 0 6.0641-723.911732z m-73.517363 655.277151a415.902726 415.902726 0 1 1 5.079668-588.335792 415.902726 415.902726 0 0 1-5.079668 588.335792z"
            p-id="16848" fill="#ffffff"></path>
          <path
            d="M374.084065 374.359706m78.75454 0l118.13181 0q78.75454 0 78.75454 78.75454l0 118.13181q0 78.75454-78.75454 78.75454l-118.13181 0q-78.75454 0-78.75454-78.75454l0-118.13181q0-78.75454 78.75454-78.75454Z"
            p-id="16849" fill="#ffffff"></path>
        </svg>
      </i>
      <div class="time" style="float: left;margin-left: 20px">
        <span>{{ timeText }}</span>
      </div>
      <i title="全屏" style="float: right;margin-right: 20px"
         @click="handleFullScreen">
        <svg t="1562724300081" v-show="!fullStateValue" viewBox="0 0 1025 1024" version="1.1"
             xmlns="http://www.w3.org/2000/svg" p-id="10458" width="20" height="20">
          <path
            d="M1014.331575 1013.87659C1009.09925 1020.075757 1001.421383 1024 991.98045 1024L703.975118 1024C686.287587 1024 671.955568 1009.667981 671.955568 991.98045 671.955568 974.292919 686.287587 960.017773 703.975118 960.017773L914.348681 960.984615 569.185893 615.821827 614.4 570.550847 959.9609 916.111747 959.9609 704.031991C959.9609 686.34446 974.292919 672.012441 991.98045 672.012441 1009.611108 672.012441 1023.943127 686.34446 1023.943127 704.031991L1024 991.07048C1024 1000.056429 1020.246376 1008.075535 1014.331575 1013.87659ZM991.98045 352.044432C974.292919 352.044432 959.9609 337.712413 959.9609 320.024882L960.984615 109.651319 615.764954 454.814107 570.550847 409.543127 916.054874 64.0391 703.975118 64.0391C686.287587 64.0391 671.955568 49.707081 671.955568 32.01955 671.955568 14.332019 686.287587 0 703.975118 0L991.07048 0C999.999556 0 1008.075535 3.753624 1013.87659 9.668425 1020.018884 14.90075 1023.943127 22.521744 1023.943127 32.01955L1023.943127 320.024882C1023.943127 337.712413 1009.611108 352.044432 991.98045 352.044432ZM409.543127 453.449153 63.982227 107.888253 63.982227 320.024882C63.982227 337.712413 49.650208 352.044432 32.01955 352.044432 14.332019 352.044432 0 337.712413 0 320.024882L0 32.92952C0 24.000444 3.696751 15.924465 9.611552 10.12341 14.843877 3.924243 22.521744 0 32.01955 0L319.968009 0C337.65554 0 351.987559 14.332019 351.987559 32.01955 351.987559 49.707081 337.65554 64.0391 319.968009 64.0391L109.594446 63.015385 454.814107 408.235046 409.543127 453.449153ZM32.01955 672.012441C49.650208 672.012441 63.982227 686.34446 63.982227 704.031991L63.015385 914.405554 408.178173 569.185893 453.449153 614.456873 107.888253 960.017773 319.968009 960.017773C337.65554 960.017773 351.987559 974.349792 351.987559 991.98045 351.987559 1009.667981 337.65554 1024 319.968009 1024L32.92952 1024C23.943571 1024 15.924465 1020.303249 10.12341 1014.388448 3.924243 1009.09925 0 1001.478256 0 991.98045L0 704.031991C0 686.34446 14.332019 672.012441 32.01955 672.012441Z"
            p-id="10459" fill="#ffffff"></path>
        </svg>
        <svg t="1562724343810" v-show="fullStateValue" viewBox="0 0 1024 1024" version="1.1"
             xmlns="http://www.w3.org/2000/svg" p-id="11268" width="20" height="20">
          <path
            d="M397.850624 353.744896V55.148544c0-21.069824-17.098752-38.166528-38.166528-38.166528-21.061632 0-38.160384 17.098752-38.160384 38.166528v215.472128L78.870528 27.89376c-14.272512-14.272512-37.404672-14.272512-51.75296 0-14.272512 14.348288-14.272512 37.480448 0 51.75296L269.84448 322.297856H54.372352c-21.069824 0-38.166528 17.098752-38.166528 38.160384 0 21.069824 17.098752 38.166528 38.166528 38.166528h298.596352c27.858944 0 44.88192-14.348288 44.88192-44.879872zM674.086912 398.624768h298.596352c21.069824 0 38.166528-17.098752 38.166528-38.166528 0-21.061632-17.096704-38.160384-38.166528-38.160384H757.211136L999.936 79.64672c14.272512-14.272512 14.272512-37.404672 0-51.75296-14.348288-14.272512-37.4784-14.272512-51.75296 0L705.533952 270.620672V55.148544c0-21.069824-17.098752-38.166528-38.162432-38.166528-21.069824 0-38.166528 17.098752-38.166528 38.166528v298.596352c0 30.531584 16.9472 44.879872 44.88192 44.879872zM352.968704 627.615744H54.372352c-21.069824 0-38.166528 17.098752-38.166528 38.166528s17.098752 38.166528 38.166528 38.166528H269.84448L27.117568 946.593792c-14.272512 14.272512-14.272512 37.404672 0 51.75296 14.348288 14.272512 37.480448 14.272512 51.75296 0l242.651136-242.726912V971.10016c0 21.06368 17.098752 38.160384 38.160384 38.160384 21.069824 0 38.166528-17.096704 38.166528-38.160384V672.497664c0.002048-30.527488-17.020928-44.88192-44.879872-44.88192zM629.204992 672.497664V971.10016c0 21.06368 17.098752 38.160384 38.166528 38.160384 21.06368 0 38.162432-17.096704 38.162432-38.160384V755.621888L948.18304 998.346752c14.27456 14.272512 37.404672 14.272512 51.75296 0 14.272512-14.348288 14.272512-37.480448 0-51.75296L757.211136 703.950848h215.472128c21.069824 0 38.166528-17.098752 38.166528-38.166528s-17.096704-38.166528-38.166528-38.166528H674.086912c-27.93472-0.002048-44.88192 14.352384-44.88192 44.879872z"
            p-id="11269" fill="#ffffff"></path>
        </svg>
      </i>
      <i title="横竖屏" style="width:23px;height:23px;float: right;margin-right: 20px" @click="handleDirectionChange">
        <svg t="1562723553389" v-show="directionStateValue===0" viewBox="0 0 1024 1024" version="1.1"
             xmlns="http://www.w3.org/2000/svg" p-id="8607">
          <path
            d="M864.711111 955.733333 159.288889 955.733333c-37.705956 0-68.266667-30.560711-68.266667-68.266667L91.022222 455.111111c0-37.705956 30.560711-68.266667 68.266667-68.266667l705.422222 0c37.705956 0 68.266667 30.560711 68.266667 68.266667l0 432.355556C932.977778 925.172622 902.417067 955.733333 864.711111 955.733333zM887.466667 477.866667c0-25.122133-20.388978-45.511111-45.511111-45.511111L182.044444 432.355556c-25.122133 0-45.511111 20.388978-45.511111 45.511111l0 386.844444c0 25.122133 20.388978 45.511111 45.511111 45.511111l659.911111 0c25.122133 0 45.511111-20.388978 45.511111-45.511111L887.466667 477.866667zM796.444444 773.688889c-12.561067 0-22.755556-10.171733-22.755556-22.755556l0-159.288889c0-12.561067 10.194489-22.755556 22.755556-22.755556s22.755556 10.194489 22.755556 22.755556l0 159.288889C819.2 763.517156 809.005511 773.688889 796.444444 773.688889zM887.466667 159.288889c0-25.122133-20.388978-45.511111-45.511111-45.511111L500.622222 113.777778c-25.122133 0-45.511111 20.388978-45.511111 45.511111l0 182.044444-45.511111 0L409.6 136.533333c0-37.705956 30.560711-68.266667 68.266667-68.266667l386.844444 0c37.705956 0 68.266667 30.560711 68.266667 68.266667l0 204.8-45.511111 0L887.466667 159.288889z"
            p-id="8608" fill="#ffffff"></path>
        </svg>
        <svg t="1562723631425" v-show="directionStateValue===1" viewBox="0 0 1024 1024" version="1.1"
             xmlns="http://www.w3.org/2000/svg" p-id="9411">
          <path
            d="M887.466667 932.977778l-204.8 0 0-45.511111 182.044444 0c25.122133 0 45.511111-20.388978 45.511111-45.511111L910.222222 500.622222c0-25.122133-20.388978-45.511111-45.511111-45.511111l-182.044444 0 0-45.511111 204.8 0c37.705956 0 68.266667 30.560711 68.266667 68.266667l0 386.844444C955.733333 902.417067 925.172622 932.977778 887.466667 932.977778zM568.888889 932.977778 136.533333 932.977778c-37.705956 0-68.266667-30.560711-68.266667-68.266667L68.266667 159.288889c0-37.705956 30.560711-68.266667 68.266667-68.266667l432.355556 0c37.705956 0 68.266667 30.560711 68.266667 68.266667l0 705.422222C637.155556 902.417067 606.594844 932.977778 568.888889 932.977778zM591.644444 182.044444c0-25.122133-20.388978-45.511111-45.511111-45.511111L159.288889 136.533333C134.166756 136.533333 113.777778 156.922311 113.777778 182.044444l0 659.911111c0 25.122133 20.388978 45.511111 45.511111 45.511111l386.844444 0c25.122133 0 45.511111-20.388978 45.511111-45.511111L591.644444 182.044444zM432.355556 819.2l-159.288889 0c-12.561067 0-22.755556-10.171733-22.755556-22.755556 0-12.561067 10.194489-22.755556 22.755556-22.755556l159.288889 0c12.561067 0 22.755556 10.194489 22.755556 22.755556C455.111111 809.028267 444.916622 819.2 432.355556 819.2z"
            p-id="9412" fill="#ffffff"></path>
        </svg>
      </i>
      <i title="切换横屏页数" v-show="directionStateValue===0" style="margin-top:4px;width:20px;height:23px;float: right;margin-right: 23px"
         @click="handlePagePerChange">
        <svg t="1564481010366" v-show="pagePerStateValue===1" viewBox="0 0 1396 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3034"><path d="M1280 1024h-1163.636364A116.363636 116.363636 0 0 1 0 907.636364v-791.272728A116.363636 116.363636 0 0 1 116.363636 0h1163.636364A116.363636 116.363636 0 0 1 1396.363636 116.363636v791.272728a116.363636 116.363636 0 0 1-116.363636 116.363636zM116.363636 46.545455A69.818182 69.818182 0 0 0 46.545455 116.363636v791.272728A69.818182 69.818182 0 0 0 116.363636 977.454545h1163.636364a69.818182 69.818182 0 0 0 69.818182-69.818181v-791.272728A69.818182 69.818182 0 0 0 1280 46.545455z" fill="#ffffff" p-id="3035"></path><path d="M459.403636 791.272727V309.527273a232.727273 232.727273 0 0 1-56.785454 37.236363 335.127273 335.127273 0 0 1-73.541818 29.323637v-69.818182a467.781818 467.781818 0 0 0 93.090909-39.563636 405.410909 405.410909 0 0 0 78.196363-51.2h26.996364V791.272727zM834.094545 580.887273V791.272727h-72.610909V228.072727h160.116364a208.523636 208.523636 0 0 1 139.636364 43.752728 158.254545 158.254545 0 0 1 50.269091 126.138181 169.425455 169.425455 0 0 1-58.647273 134.050909 205.730909 205.730909 0 0 1-147.549091 48.872728z m0-289.047273v224.814545h67.49091a150.341818 150.341818 0 0 0 101.003636-29.78909 108.916364 108.916364 0 0 0 34.443636-86.109091q0-108.916364-128.465454-108.916364z" fill="#ffffff" p-id="3036"></path></svg>
        <svg t="1564480971764" v-show="pagePerStateValue===2" viewBox="0 0 1396 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2861"><path d="M1280 1024h-1163.636364A116.363636 116.363636 0 0 1 0 907.636364v-791.272728A116.363636 116.363636 0 0 1 116.363636 0h1163.636364A116.363636 116.363636 0 0 1 1396.363636 116.363636v791.272728a116.363636 116.363636 0 0 1-116.363636 116.363636zM116.363636 46.545455A69.818182 69.818182 0 0 0 46.545455 116.363636v791.272728A69.818182 69.818182 0 0 0 116.363636 977.454545h1163.636364a69.818182 69.818182 0 0 0 69.818182-69.818181v-791.272728A69.818182 69.818182 0 0 0 1280 46.545455z" fill="#ffffff" p-id="2862"></path><path d="M562.269091 375.621818a93.090909 93.090909 0 0 0-28.858182-71.214545A110.312727 110.312727 0 0 0 455.214545 279.272727a152.669091 152.669091 0 0 0-70.283636 17.687273 226.210909 226.210909 0 0 0-66.56 49.803636V279.272727a193.163636 193.163636 0 0 1 62.370909-46.545454A206.661818 206.661818 0 0 1 465.454545 218.763636a179.665455 179.665455 0 0 1 122.88 40.494546 139.636364 139.636364 0 0 1 46.545455 110.778182 200.145455 200.145455 0 0 1-29.789091 107.985454 350.487273 350.487273 0 0 1-97.745454 93.090909 987.694545 987.694545 0 0 0-93.09091 69.818182 139.636364 139.636364 0 0 0-33.512727 40.029091 104.727273 104.727273 0 0 0-9.309091 46.545455h279.272728V791.272727H295.098182v-27.927272a228.538182 228.538182 0 0 1 13.498182-82.85091 201.541818 201.541818 0 0 1 43.752727-66.094545 659.549091 659.549091 0 0 1 93.090909-77.265455 386.327273 386.327273 0 0 0 90.298182-81.454545 139.636364 139.636364 0 0 0 26.530909-80.058182zM834.094545 580.887273V791.272727h-72.610909V228.072727h160.116364a208.523636 208.523636 0 0 1 139.636364 43.752728 158.254545 158.254545 0 0 1 50.269091 126.138181 169.425455 169.425455 0 0 1-58.647273 134.050909 205.730909 205.730909 0 0 1-147.549091 48.872728z m0-289.047273v224.814545h67.49091a150.341818 150.341818 0 0 0 101.003636-29.78909 108.916364 108.916364 0 0 0 34.443636-86.109091q0-108.916364-128.465454-108.916364z" fill="#ffffff" p-id="2863"></path></svg>
        <svg t="1564480584683" v-show="pagePerStateValue===3" viewBox="0 0 1396 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2688"><path d="M1280 1024h-1163.636364A116.363636 116.363636 0 0 1 0 907.636364v-791.272728A116.363636 116.363636 0 0 1 116.363636 0h1163.636364A116.363636 116.363636 0 0 1 1396.363636 116.363636v791.272728a116.363636 116.363636 0 0 1-116.363636 116.363636zM116.363636 46.545455A69.818182 69.818182 0 0 0 46.545455 116.363636v791.272728A69.818182 69.818182 0 0 0 116.363636 977.454545h1163.636364a69.818182 69.818182 0 0 0 69.818182-69.818181v-791.272728A69.818182 69.818182 0 0 0 1280 46.545455z" fill="#ffffff" p-id="2689"></path><path d="M303.941818 698.181818a208.058182 208.058182 0 0 0 130.792727 46.545455 139.636364 139.636364 0 0 0 93.09091-28.858182 93.090909 93.090909 0 0 0 33.978181-76.334546c0-71.214545-51.2-107.054545-153.134545-107.054545h-46.545455v-61.44h46.545455q135.447273 0 135.447273-100.538182c0-61.905455-34.443636-93.090909-103.330909-93.090909A178.734545 178.734545 0 0 0 325.818182 317.905455V250.414545a252.276364 252.276364 0 0 1 128.930909-31.650909 171.752727 171.752727 0 0 1 115.898182 37.236364 123.810909 123.810909 0 0 1 43.752727 97.745455 139.636364 139.636364 0 0 1-113.105455 142.42909 152.203636 152.203636 0 0 1 96.814546 42.821819 126.138182 126.138182 0 0 1 35.374545 93.090909 151.738182 151.738182 0 0 1-54.923636 122.414545 215.505455 215.505455 0 0 1-145.687273 46.545455 244.829091 244.829091 0 0 1-128.930909-29.789091zM834.094545 580.887273V791.272727h-72.610909V228.072727h160.116364a208.523636 208.523636 0 0 1 139.636364 43.752728 158.254545 158.254545 0 0 1 50.269091 126.138181 169.425455 169.425455 0 0 1-58.647273 134.050909 205.730909 205.730909 0 0 1-147.549091 48.872728z m0-289.047273v224.814545h67.49091a150.341818 150.341818 0 0 0 101.003636-29.78909 108.916364 108.916364 0 0 0 34.443636-86.109091q0-108.916364-128.465454-108.916364z" fill="#ffffff" p-id="2690"></path></svg>
      </i>
      <i
        title="光标"
        style="margin-top: 3px; float: right;margin-right: 20px"
        @click="handleCursorChange">
        <svg t="1563070464837" v-show="cursorStateValue===2" viewBox="0 0 1024 1024" version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="5604" width="20" height="20">
          <path
            d="M85.333333 213.333333h853.333334a85.333333 85.333333 0 0 1 85.333333 85.333334v426.666666a85.333333 85.333333 0 0 1-85.333333 85.333334H85.333333a85.333333 85.333333 0 0 1-85.333333-85.333334V298.666667a85.333333 85.333333 0 0 1 85.333333-85.333334z m0 85.333334v426.666666h853.333334V298.666667H85.333333z"
            p-id="5605" fill="#ffffff"></path>
        </svg>
        <svg t="1562725360258" v-show="cursorStateValue===1" viewBox="0 0 1024 1024" version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="21859" width="20" height="20">
          <path
            d="M546.133333 415.402667a102.263467 102.263467 0 0 0-68.266666 0V34.133333a34.133333 34.133333 0 1 1 68.266666 0v381.269334zM415.402667 477.866667a102.263467 102.263467 0 0 0 0 68.266666H34.133333a34.133333 34.133333 0 1 1 0-68.266666h381.269334zM477.866667 608.597333a102.263467 102.263467 0 0 0 68.266666 0V989.866667a34.133333 34.133333 0 1 1-68.266666 0V608.597333zM608.597333 546.133333a102.263467 102.263467 0 0 0 0-68.266666H989.866667a34.133333 34.133333 0 1 1 0 68.266666H608.597333z"
            fill="#ffffff" p-id="21860"></path>
        </svg>
        <svg t="1562725491407" v-show="cursorStateValue===0" viewBox="0 0 1027 1024" version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="23256" width="20" height="20">
          <path
            d="M148.931449 733.111311a474.568976 474.568976 0 0 1-32.094186-62.231495l4.146549 9.826394a468.733351 468.733351 0 0 1-32.552775-119.239984l1.470284 10.934357a475.764456 475.764456 0 0 1-0.007002-124.298459l-1.470283 10.934358a467.625387 467.625387 0 0 1 32.239464-118.538099l-4.146549 9.826394a470.02685 470.02685 0 0 1 60.538919-103.688237l-6.430739 8.324605a473.168706 473.168706 0 0 1 84.35576-84.35576l-8.324605 6.43074a470.067108 470.067108 0 0 1 103.688236-60.53892l-9.826394 4.14655a467.625387 467.625387 0 0 1 118.538099-32.239465l-10.934358 1.470284a475.234104 475.234104 0 0 1 124.238948 0l-10.934357-1.470284a467.625387 467.625387 0 0 1 118.538098 32.239465l-9.824643-4.14655a469.986592 469.986592 0 0 1 103.688236 60.53892l-8.324605-6.43074a473.168706 473.168706 0 0 1 84.35576 84.35576l-6.432489-8.324605a470.067108 470.067108 0 0 1 60.538919 103.688237l-4.14655-9.826394a467.551873 467.551873 0 0 1 32.239465 118.538099l-1.468533-10.934358a475.386383 475.386383 0 0 1 0 124.238948l1.468533-10.934358a467.551873 467.551873 0 0 1-32.239465 118.538099l4.14655-9.824644a469.986592 469.986592 0 0 1-60.538919 103.688237l6.432489-8.324605a473.226467 473.226467 0 0 1-84.35576 84.35576l8.324605-6.43249a470.067108 470.067108 0 0 1-103.688236 60.538919l9.824643-4.146549a467.513366 467.513366 0 0 1-118.538098 32.239464l10.934357-1.468533a475.776708 475.776708 0 0 1-125.233139-0.133025l10.934357 1.468533a468.691343 468.691343 0 0 1-117.941233-32.272721l9.826394 4.146549A472.56659 472.56659 0 0 1 272.82558 862.216197c-18.691853-12.434397-45.44401-3.73697-56.276847 14.757094-5.564323 9.500831-7.067862 21.079313-4.14655 31.69511 2.961571 10.768076 9.793138 18.52207 18.903644 24.583488 90.653474 60.299123 201.65287 89.722294 310.275307 82.654432 89.676786-5.835625 177.653994-34.905228 252.015327-85.642258 72.483222-49.455783 132.684326-117.083568 171.202251-196.111301 40.010962-82.092574 58.284485-174.449126 50.32745-265.596195-7.803004-89.403733-38.201113-176.476017-90.452185-249.710133-51.020584-71.510034-119.443023-130.506906-199.42819-167.402268C642.136267 13.108277 549.543419-3.63195 458.315834 6.364227c-45.18671 4.951704-89.352973 14.832359-131.641124 31.658352-41.176687 16.384908-80.130446 37.023136-115.704303 63.544249-35.253545 26.283066-67.342481 55.958286-94.754514 90.413677-27.534557 34.611171-51.09935 71.664064-68.788259 112.270141-18.063482 41.465493-31.390551 84.266493-37.810789 129.111887-3.52868 24.655252-5.921391 49.308755-6.092924 74.228308-0.21004 30.219575 2.847799 60.323628 7.725989 90.124872 10.197466 62.317262 33.678242 123.137985 66.645846 176.917102 11.695754 19.078678 36.62931 26.265563 56.276848 14.757094 19.029668-11.146148 26.484355-37.149161 14.758845-56.278598z"
            p-id="23257" fill="#ffffff"></path>
          <path
            d="M317.163377 551.356277h386.154183c22.423572 0 41.132929-18.709356 41.132928-41.132929s-18.709356-41.132929-41.132928-41.132928H317.163377c-22.423572 0-41.132929 18.709356-41.132929 41.132928s18.711107 41.132929 41.132929 41.132929z"
            p-id="23258" fill="#ffffff"></path>
        </svg>
      </i>
      <i
        title="更多"
        style="margin-top: 3px; float: right;margin-right: 20px"
        @click="handleMore">
        <svg t="1568896656828" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2622" width="20" height="20"><path d="M511.122286 7.801905c-134.095238 0-248.734476 47.932952-343.917715 143.701333C71.972571 246.735238 24.380952 361.374476 24.380952 495.469714c0 134.680381 47.591619 249.61219 142.823619 344.795429 95.183238 95.232 209.822476 142.823619 343.917715 142.823619 134.680381 0 249.660952-47.591619 344.84419-142.823619 95.183238-95.183238 142.774857-210.16381 142.774857-344.795429 0-134.095238-47.591619-248.734476-142.774857-343.966476C760.685714 55.734857 645.802667 7.850667 511.122286 7.850667zM205.482667 189.878857c84.74819-84.74819 186.660571-127.122286 305.639619-127.122286 119.612952 0 221.769143 42.374095 306.517333 127.122286 84.74819 84.163048 127.122286 186.026667 127.122286 305.639619 0 119.56419-42.374095 221.720381-127.122286 306.468572-84.74819 84.796952-186.904381 127.171048-306.517333 127.171047-119.56419 0-221.476571-42.422857-305.639619-127.171047-84.74819-84.74819-127.122286-186.904381-127.122286-306.468572 0-118.979048 42.422857-220.891429 127.122286-305.639619z m458.020571 305.639619c0 13.897143 4.632381 25.84381 13.945905 35.693714 9.849905 9.264762 21.455238 13.945905 34.816 13.945905a49.152 49.152 0 0 0 49.639619-49.639619 49.152 49.152 0 0 0-49.639619-48.761905c-13.360762 0-24.966095 4.632381-34.816 13.897143-9.264762 9.898667-13.945905 21.455238-13.945905 34.864762z m-102.741333 0c0-13.360762-4.632381-24.966095-13.945905-34.864762a50.224762 50.224762 0 0 0-35.693714-13.897143c-13.360762 0-24.966095 4.632381-34.816 13.897143-9.264762 9.898667-13.945905 21.455238-13.945905 34.864762 0 13.897143 4.632381 25.84381 13.945905 35.693714 9.849905 9.264762 21.455238 13.945905 34.816 13.945905 13.945905 0 25.84381-4.681143 35.693714-13.945905A50.224762 50.224762 0 0 0 560.761905 495.420952z m-201.142857 0c0-13.360762-4.632381-24.966095-13.945905-34.864762a49.152 49.152 0 0 0-34.816-13.897143 49.152 49.152 0 1 0 0 98.401524c13.360762 0 24.966095-4.681143 34.816-13.945905a50.224762 50.224762 0 0 0 13.945905-35.693714z" fill="#ffffff" p-id="2623"></path></svg>
      </i>
      <div v-show="pageNumShow" class="page-num"
           style="margin-top: 3px; float: right;margin-right: 20px">
        <span>{{currentPageNum}}/{{pageNum}}</span>
      </div>
    </div>
  </div>
</template>

<script>
  import $ from 'jquery'

  export default {
    name: "HHScoreController",
    props: {
      currentProgress: Number,
      maxProgress: Number,//时间的ms值，自动转换时间并显示
      controllerWidth: Number,//时间的ms值，自动转换时间并显示
      controllerHeight: Number,//时间的ms值，自动转换时间并显示
      timeTextValue: String,//时间的ms值，自动转换时间并显示
      hideState: Boolean,
      playStateValue: Boolean,
      directionStateValue: Number,
      pagePerStateValue: Number,
      cursorStateValue: Number,
      fullStateValue: Boolean,
      pageNum: Number,
      currentPageNum: Number,
    },
    data() {
      return {
        timeText: this.timeTextValue,
        slider: null,        //滚动条DOM元素
        thunk: null,         //拖拽DOM元素
        progress: 0,
        max: this.maxProgress,
        min: 0,
        isOnSeek: false,
        mousePercent: 0,
        pageNumShow: true,
      }
    },

    watch: {
      currentProgress(val) {
        if (!this.isOnSeek) {
          this.progress = val;
        }
      },
      maxProgress(val) {
        this.max = val;
      },
      timeTextValue(val) {
        this.timeText = val;
      },
      hideState(val) {
        if (val) {//隐藏
          $(this.$refs.container).slideUp();
        } else {//显示
          $(this.$refs.container).slideDown();
        }
      },
      pageNum(val) {
        this.pageNum = val;
      },
      currentPageNum(val) {
        this.currentPageNum = val;
      },
    },
    mounted() {
      this.slider = this.$refs.slider;
      this.thunk = this.$refs.trunk;
      let _this = this;
      this.slider.onclick = function (e) {
        let left = $(_this.slider).offset().left;
        let newWidth = e.clientX - left;
        if (newWidth <= 0 || newWidth >= _this.seekWidth) {
          return;
        } else {
          let scale = newWidth / _this.slider.offsetWidth;
          _this.progress = Math.ceil((_this.max - _this.min) * scale + _this.min);
          _this.progress = Math.max(_this.progress, _this.min);
          _this.progress = Math.min(_this.progress, _this.max);
          _this.$emit("onProgressChanged", _this.progress);
        }
      };
      $(this.slider).hover(function (e) {
        let left = $(_this.slider).offset().left;
        let newWidth = e.clientX - left;
        let scale = newWidth / _this.slider.offsetWidth;
        let progress = Math.ceil((_this.max - _this.min) * scale + _this.min);
        progress = Math.max(progress, _this.min);
        progress = Math.min(progress, _this.max);
        _this.mousePercent = progress / _this.max;
      });
      this.thunk.onmousedown = function (e) {
        let width = parseInt(_this.seekWidth);
        let disX = e.clientX;
        document.onmousemove = function (e) {
          _this.isOnSeek = true;
          // value, left, width
          // 当value变化的时候，会通过计算属性修改left，width

          // 拖拽的时候获取的新width
          let newWidth = e.clientX - disX + width;
          // 拖拽的时候得到新的百分比
          let scale = newWidth / _this.slider.offsetWidth;
          _this.progress = Math.ceil((_this.max - _this.min) * scale + _this.min);
          _this.progress = Math.max(_this.progress, _this.min);
          _this.progress = Math.min(_this.progress, _this.max);
        };
        document.onmouseup = function () {
          _this.isOnSeek = false;
          _this.$emit("onProgressChanged", _this.progress);
          document.onmousemove = document.onmouseup = null;
        };
        return false;
      }

    },
    methods: {
      handleMore(){
        this.$emit("onMoreClick", this.playStateValue);
      },
      handlePlay() {
        this.$emit("onPlayStateChanged", this.playStateValue);
      },
      handleStop() {
        this.$emit("onStop");
      },
      handleFullScreen() {
        this.$emit("onFullStateChanged", this.fullStateValue);
      },
      handleDirectionChange() {
        this.$emit("onDirectionStateChanged", this.directionStateValue);
      },
      handlePagePerChange() {
        this.$emit("onPagePerStateChanged", this.pagePerStateValue);
      },
      handleCursorChange() {
        this.$emit("onCursorStateChanged", this.cursorStateValue);
      },
    },
    computed: {
      tips: function () {
        let tips = "未知";
        return tips;
      },
      scale() {
        return (this.progress - this.min) / (this.max - this.min);
      },
      seekWidth() {
        if (this.slider) {
          return this.slider.offsetWidth * this.scale + 'px';
        } else {
          return 0 + 'px'
        }
      },
      left() {
        if (this.slider) {
          return this.slider.offsetWidth * this.scale - this.thunk.offsetWidth / 2 + 'px';
        } else {
          return 0 + 'px'
        }
      }
    }
  }
</script>

<style scoped>
  /*进度条组件*/
  .con-slider {
    position: relative;
    margin: 20px 20px;
    width: auto;
    height: 5px;
    padding-right: 10px;
    background: #e4e7ed;
    border-radius: 5px;
    cursor: pointer;
    box-sizing: content-box;
  }

  .con-slider:after {
    box-sizing: content-box;
  }

  .con-slider:before {
    box-sizing: content-box;
  }

  .con-slider .process {
    position: absolute;
    left: 0;
    top: 0;
    width: 112px;
    height: 5px;
    border-radius: 5px;
    background: #409eff
  }

  .con-slider .thunk {
    position: absolute;
    left: 100px;
    top: -4px;
    width: 10px;
    height: 10px
  }

  .con-slider .btn-circle {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    border: 2px solid #409eff;
    background: rgba(255, 255, 255, 1);
    transition: .2s all;
    box-sizing: content-box;
  }

  .con-slider .btn-circle:after, :before {
    box-sizing: content-box;
  }

  .con-slider .btn-circle:hover {
    transform: scale(1.1);
    opacity: .6
  }

  .controller-container {
    position: relative;
  }

  .score-controller {
    background-color: rgba(0, 0, 0, 0.8);
    position: relative;
    padding-top: 3px;
    z-index: 20;
  }

  .time {
    font-size: 15px;
    color: #EEEEEE;
  }

  .page-num{
    color: white;
  }

</style>
